<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="profileSQL">
 	<insert id="askWrite" parameterType="ask">
		insert into ask values(seq_ask.nextval
									, #{ask_category}
									, #{order_number}
									, #{name}
									, #{email}
									, #{subject}
									, #{content}
									, 0
									, #{image1}
									, sysdate)
	</insert>
	
 	<select id="getAskList" parameterType="java.util.Map" resultType="ask">
 		select * from(select rownum rn, tt.* from
 				(select * from ask order by seq desc)tt)
 				         where <![CDATA[rn>= #{startNum}]]> and  <![CDATA[rn<= #{endNum}]]>   
 	</select>
 	
 	<select id="getTotalA"  resultType="Integer">
 		select count(*) as count from ask
 	</select>
 	
 	<select id="getAsk" parameterType="int" resultType="ask">
       select * from ask where seq=#{seq}
    </select>
 	
 	<select id="getMember" parameterType="Integer" resultType="member">
 		select * from member where id=#{id}
 	</select>
	
	<update id="updateMember" parameterType="java.util.Map">
		update member set name=#{name}, bir_yy=#{bir_yy}, bir_mm=#{bir_mm}, bir_dd=#{bir_dd}, 
		zipcode=#{zipcode}, addr1=#{addr1}, addr2=#{addr2} where id=#{id}
	</update>
	
	<update id="updateContact" parameterType="java.util.Map">
		update member set phone=#{phone} where id=#{id}
	</update>
	
	<update id="updatePassword" parameterType="java.util.Map">
		update member set password=#{password} where id=#{id}
	</update>
	
	<select id="getWishlist" parameterType="int" resultType="wishlist">
		select * from wishlist where member_id=#{id}
	</select>
	
	<select id="getWishlistImage" parameterType="int" resultType="String">
		select product_img_thumb from product_image where product_code=(
			select product_code from wishlist where member_id=#{id}
		)
	</select>
 </mapper>