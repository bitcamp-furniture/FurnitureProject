<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="adminSQL">
 	<!-- 회원목록 -->
	<select id="getMemberList" parameterType="java.util.Map" resultType="member">
 		select * from(select rownum rn, tt.* from
 				(select * from member order by created_at desc)tt)
 				         where <![CDATA[rn>= #{startNum}]]> and  <![CDATA[rn<= #{endNum}]]>   
 	</select>
 
 	<!-- 총 글 수 -->
	<select id="getTotalA" resultType="int">
		select count(*) from member
	</select>
	
	<!-- 검색 -->
	<select id="getSearchMemberList" parameterType="java.util.Map" resultType="member">
      
         select * from(select rownum rn, tt. * from
          (select * from member where (name || email) like '%'||#{keyword}||'%' order by created_at desc)tt) 
          where <![CDATA[rn >= #{startNum}]]> and <![CDATA[rn <= #{endNum}]]>
    </select>
    
    <!-- 검색 총 글 수 -->
    <select id="getSearchTotal" parameterType="java.util.Map" resultType="int">
      select count(*) from member where (name || email) like '%'||#{keyword}||'%'
    </select>
    
    <!-- 회원삭제 -->
	<delete id="memberListDelete" parameterType="java.util.Map">
		delete member where id in
		<foreach collection="array" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</delete>
	
	
 </mapper>